<!DOCTYPE html>
<html>
<head>
  <title>Claim Your 1 Month PC Game Pass</title>
  <meta charset="UTF-8" />
  <style>
    body {
      font-family: sans-serif;
      max-width: 600px;
      margin: 2em auto;
      padding: 2em;
      background: #f7f7f7;
      border-radius: 10px;
    }
    .hidden { display: none; }
    label { display: block; margin-top: 1em; }
    button { margin-top: 1em; }
    .code-box {
      font-weight: bold;
      font-size: 1.2em;
      background: #fff;
      border: 1px dashed #aaa;
      padding: 10px;
      margin-top: 1em;
      display: inline-block;
    }
  </style>
</head>
<body>
  <h1>Claim Your 1 Month PC Game Pass (New Users Only)</h1>
  <p>To unlock your code, please verify your eBay purchase and confirm receipt.</p>

  <!-- Verification form -->
  <form id="verify-form">
    <label>
      Your eBay Username:
      <input type="text" id="username" required>
    </label>
    <label>
      eBay Item Number:
      <input type="text" id="itemnumber" required placeholder="297442443253">
    </label>
    <label>
      Access Code (from eBay message):
      <input type="text" id="accesscode" required>
    </label>
    <button type="submit">Verify and Confirm Receipt</button>
  </form>

  <!-- Confirmation + code section -->
  <div id="claim-section" class="hidden">
    <h2>âœ… Verified</h2>
    <p>To receive your Game Pass code, please confirm the following:</p>

    <form
      action="https://formspree.io/f/mdkzrkap"
      method="POST"
      id="confirm-form"
    >
      <input type="hidden" name="username" id="receipt-username">
      <input type="hidden" name="itemnumber" id="receipt-item">
      
      <label><input type="checkbox" name="confirmedIdentity" required> I am the eBay buyer for this item.</label>
      <label><input type="checkbox" name="confirmedReceived" required> I confirm I have received the digital item and accept delivery.</label>
      <label><input type="checkbox" name="confirmedAcceptance" required> I understand this transaction is now complete.</label>

      <button type="submit">Confirm and View Code</button>
    </form>
  </div>

  <!-- Code display -->
  <div id="code-section" class="hidden">
    <h2>ðŸŽ‰ Your PC Game Pass Code</h2>
    <div class="code-box">F2HGT-YXT7Q-QH32D-QYM34-VYQ4Z</div>
    <p><strong>Note:</strong> This code is for new users only. Enjoy!</p>
  </div>

  <script>
    const verifyForm = document.getElementById('verify-form');
    const claimSection = document.getElementById('claim-section');
    const receiptUsername = document.getElementById('receipt-username');
    const receiptItem = document.getElementById('receipt-item');
    const confirmForm = document.getElementById('confirm-form');
    const codeSection = document.getElementById('code-section');

    verifyForm.addEventListener('submit', function(e) {
      e.preventDefault();
      const user = document.getElementById('username').value.trim();
      const item = document.getElementById('itemnumber').value.trim();
      const code = document.getElementById('accesscode').value.trim();

      const expectedItem = "297442443253";
      const expectedAccessCode = "-n##wc2-Vk/D:b{>";

      if (item === expectedItem && code === expectedAccessCode) {
        receiptUsername.value = user;
        receiptItem.value = item;
        verifyForm.classList.add('hidden');
        claimSection.classList.remove('hidden');
      } else {
        alert("Verification failed. Please double-check your item number and access code.");
      }
    });

    confirmForm.addEventListener('submit', function(e) {
      // Allow Formspree to send email, then show the code
      setTimeout(() => {
        confirmForm.classList.add('hidden');
        codeSection.classList.remove('hidden');
      }, 300);
    });
  </script>
</body>
</html>
